-- Comentarios
-- A Linha abaixo cria um Banco de Dados
create database dbmeusservicos;
-- A Linha abaixoescolhe o Banco de Dados
use dbmeusservicos;
-- Obloco de instruções abaixo cria uma Tabela
create table tbusuarios(
iduser int primary key,
usuario varchar(50) not null,
cargo_usuario varchar(15),
telefone varchar(15) not null,
login varchar(15) not null unique,
senha varchar(15) not null,
perfil varchar(20) not null
);
insert into tbusuarios(iduser,usuario,cargo_usuario,telefone,login,senha,perfil)
values(1,'Administrador','Administrador','000000000000000','admin','admin123','admin');

create table tbclientes(
idcli int primary key auto_increment,
nomecli varchar(60) not null,
sexocli varcharacter(1),
cepcli varchar(8),
endcli varchar(150),
bairrocli varchar(30),
cidadecli varchar(30),
telefonecli varchar(15) not null,
emailcli varchar(50)
);
insert into tbclientes(nomecli,sexocli,cepcli,endcli,bairrocli,cidadecli,telefonecli,emailcli)
values('Caixa','F','00000000','Loja','loja','loja','000000000000000','loja@gmail.com');

create table tbos(
os int primary key auto_increment,
data_os timestamp default current_timestamp,
tipo varchar(15) not null,
situacao varchar(20) not null,
previsao_entreg_os varchar(50),
equipamento varchar(150) not null,
defeito varchar(150) not null,
servico varchar(150),
tecnico varchar(30),
Valor decimal(10,2),
idcli int not null,
foreign key(idcli) references tbclientes(idcli)
);

create table tbvenda(
idvenda MEDIUMINT NOT NULL AUTO_INCREMENT Primary key,
cliente_venda varchar(50),
nome varchar(50),
preco double
);

create table tbtotalvendas(
id  MEDIUMINT NOT NULL AUTO_INCREMENT Primary key,
dia varchar(50),
venda double
);

create table tbprodutos(
idproduto MEDIUMINT NOT NULL AUTO_INCREMENT Primary key,
codigo varchar(18),
produto varchar(50),
custo varchar(9),
preco varchar(9),
fornecedor varchar(50),
obs varchar(500),
estoque varchar(30),
quantidade int
);
select quantidade from tbprodutos;

create table tbcompra(
idcompra MEDIUMINT NOT NULL AUTO_INCREMENT Primary key,
nome_produto varchar(50),
valor double,
valor_unidade double,
quantidade int,
quantidade_comprada int
);

select sum(valor) from tbcompra;

create table gastos(
idgastos MEDIUMINT NOT NULL AUTO_INCREMENT Primary key,
valor double,
data_emicao date
);

select * from gastos;

select
O.os,previsao_entreg_os,tecnico,defeito,servico,Valor,
C.nomecli,telefonecli
from tbos as O
inner join tbclientes as C
on (O.idcli = C.idcli);
